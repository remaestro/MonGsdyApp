<div *ngIf="child$ | async as child; else loadingOrError" class="container mx-auto p-4">
  <div class="bg-white shadow-xl rounded-lg p-6 md:p-8">
    <button routerLink="/parent/children" class="mb-6 text-indigo-600 hover:text-indigo-800 transition duration-150 ease-in-out">
      <i class="fas fa-arrow-left mr-2"></i> Retour à la liste des enfants
    </button>

    <div class="flex flex-col md:flex-row items-center">
      <img [src]="child.photo || 'assets/images/default-avatar.png'" alt="Photo de {{ child.firstName }}" class="w-32 h-32 md:w-48 md:h-48 rounded-full mr-0 md:mr-8 mb-4 md:mb-0 object-cover border-4 border-indigo-200">
      <div class="text-center md:text-left">
        <h2 class="text-3xl md:text-4xl font-bold text-indigo-700">{{ child.firstName }} {{ child.lastName }}</h2>
        <p class="text-gray-600 text-lg">Classe: {{ child.class }}</p>
        <p class="text-gray-500 text-md">Date de naissance: {{ child.birthDate | date:'dd MMMM yyyy':'fr' }}</p>
      </div>
    </div>

    <div class="mt-8 border-t pt-6">
      <h3 class="text-2xl font-semibold text-gray-700 mb-4">Informations supplémentaires</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="bg-gray-50 p-4 rounded-lg">
          <strong class="text-gray-600">Allergies:</strong>
          <!-- <p class="text-gray-800">{{ child.allergies?.join(', ') || 'Non spécifiées' }}</p> -->
          <p><em>(Les informations sur les allergies seront bientôt disponibles)</em></p>
        </div>
        <div class="bg-gray-50 p-4 rounded-lg">
          <strong class="text-gray-600">Personne à contacter en cas d'urgence:</strong>
          <!-- <p class="text-gray-800">{{ child.emergencyContact?.name || 'Non spécifié' }} ({{ child.emergencyContact?.phone || 'N/A' }})</p> -->
          <p><em>(Les informations sur les contacts d'urgence seront bientôt disponibles)</em></p>
        </div>
        <!-- Ajouter d'autres champs ici selon le modèle Child -->
      </div>
    </div>

    <!-- Sections pour la vie scolaire et la cantine (à implémenter) -->
    <div class="mt-8">
      <h3 class="text-2xl font-semibold text-gray-700 mb-4">Vie Scolaire & Cantine</h3>
      <div class="flex space-x-4">
        <button [routerLink]="['/parent/school-life', child.id]" class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition duration-150 ease-in-out">
          <i class="fas fa-school mr-2"></i> Vie Scolaire
        </button>
        <button [routerLink]="['/parent/canteen', child.id]" class="bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-lg transition duration-150 ease-in-out">
          <i class="fas fa-utensils mr-2"></i> Cantine
        </button>
      </div>
    </div>

  </div>
</div>

<ng-template #loadingOrError>
  <div class="container mx-auto p-4 text-center">
    <p class="text-gray-600 text-xl">Chargement du profil de l'enfant ou enfant non trouvé...</p>
    <!-- Vous pouvez ajouter un spinner ici -->
  </div>
</ng-template>
